# http连接

* 读缓冲区大小 2048 ，写缓冲区大小 1024 ，读写缓冲区大小固定。

  缓冲区越大IO效率越高，但是内存开销也会变大。旧版本采用固定缓冲区大小，muduo用的是可变大小的缓冲区，底层是 vector。

* 利用主从状态机来处理请求

  主状态机调用 `http_conn::process_read()` 接收从状态机返回的 `HTTP_CODE`（与http的状态码对应），从状态机解析请求行、请求头部和请求体，解析结果返回给主状态机。根据解析的结果，决定http的响应报文

* 实现登录、注册、请求图片、请求视频这四种功能

  每次都是开辟一个子进程去调用cgi程序，考虑用fastcgi来优化这个过程

* 利用 `mmap` 和 `writev()` 聚簇写传递数据